
script:

  ####################################################
  #                                                  #
  #                     SCRIPTS                      #
  #                                                  #
  ####################################################

  homeassistant_restart:
    sequence:
      - service: browser_mod.toast
        data:
          duration: 16000
          message: Restarting Home Assistant...
      - service: shell_command.ha_dockermon_restart_container

  ####################################################
  #                                                  #
  #               HOME ARRIVE / LEAVE                #
  #                                                  #
  ####################################################

  home_arrive:
    alias: Home
    sequence:
      - choose:
        - conditions:
            - condition: state
              entity_id: switch.fullykiosk_screen
              state: 'on'
            - condition: state
              entity_id: switch.fullykiosk_screensaver
              state: 'off'
          sequence:
            - service: media_player.play_media
              data_template:
                entity_id: media_player.tablet
                media_content_id: >
                  {{ ['/local/sound/tts_custom/hej.mp3', 
                  '/local/sound/tts_custom/startar.mp3', 
                  '/local/sound/tts_custom/varmer_upp.mp3', 
                  '/local/sound/tts_custom/valkommen_hem.mp3'] | random }}
                media_content_type: music
      - choose:
        - conditions:
            - condition: state
              entity_id: sun.sun
              state: below_horizon
          sequence:
            - service: scene.turn_on
              data:
                entity_id: scene.hemma_below_horizon
        default:
          - service: scene.turn_on
            data:
              entity_id: scene.hemma_above_horizon
      - delay:
          seconds: 4

  home_leave:
    alias: Home Leave
    sequence:
      - choose:
        - conditions:
            - condition: state
              entity_id: switch.fullykiosk_screen
              state: 'on'
            - condition: state
              entity_id: switch.fullykiosk_screensaver
              state: 'off'
          sequence:
            - service: media_player.play_media
              data_template:
                entity_id: media_player.tablet
                media_content_id: >
                  {{ ['/local/sound/tts_custom/ha_det_bra.mp3',
                      '/local/sound/tts_custom/saknar_dig_redan.mp3',
                      '/local/sound/tts_custom/hej_da.mp3',
                      '/local/sound/tts_custom/stanger_ner_allt.mp3'] | random }}
                media_content_type: music
      - service: light.turn_off
        entity_id: light.all_lights
      - service: switch.turn_off
        entity_id:
          ['switch.wemo_fan', 'switch.wemo_monitors']
      - choose:
        - conditions:
            - condition: state
              entity_id: switch.wol_imac
              state: 'on'
          sequence:
            - service: switch.turn_off
              entity_id: switch.computer_imac
      - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.playstation_4
              state: 'on'
          sequence:
            - service: switch.turn_off
              entity_id: switch.playstation_4
      - choose:
        - conditions:
            - condition: state
              entity_id: media_player.sony_bravia
              state: 'on'
          sequence:
            - service: switch.turn_off
              entity_id: switch.tv_sony
      - choose:
        - conditions:
            - condition: state
              entity_id: media_player.samsung
              state: 'on'
          sequence:
            - service: switch.turn_off
              entity_id: switch.tv_samsung
      - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.gosund_fan
              state: 'on'
          sequence:
            - service: fan.turn_off
              entity_id: fan.sovrum_anslut
      - choose:
        - conditions:
            - condition: state
              entity_id: binary_sensor.gosund_air_purifier
              state: 'on'
          sequence:
            - service: switch.turn_off
              entity_id: switch.air_purifier
      - delay:
          seconds: 4
