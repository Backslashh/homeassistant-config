######################################################################################################
###Script to send notifications to mobile devices. Call like this:
  # action:
    # service: script.notify_engine
    # data_template:
      # title: 'Message Title'
      # value1: 'Startup: Home Assistant is Up and Running!'
      # value2: "{{ trigger.to_state.state }}"
      # value3:
      # who: "william | emily | family | parents"
      # image: 'URL to image'
      # channel: "Presence | Security | Medicine"
      # color: "blue"
      # clickaction: "https://...."
      # tag: ""
      # icon:
      # action_1: "URI"
      # action_1_title: "title"
      # action_1_uri: "url here"
      # action_2: "URI"
      # action_2_title: "title"
      # action_2_uri: "url here"
      # action_3: "URI"
      # action_3_title: "title"
      # action_3_uri: "url here"


    # @Backslashh
    # Original Repo : https://github.com/Backslashh/homeassistant-config
######################################################################################################

notify_engine:
  sequence:
    - condition: state
      entity_id: input_boolean.text_notifications
      state: 'on'

    - service_template: >
          {% if who == 'william' %}
            notify.mobile_app_william
          {% elif who == 'emily' %}
            notify.mobile_app_emily
          {% elif who == 'parents' %}
            notify.parents
          {% elif who == 'family' %}
            notify.family
          {% else %}
            notify.parents
          {% endif %}
      data_template:
        title: "{{ title }}"
        message: "{{ value1 }} {{ value2 }} {{ value3 }}"
        data:
          actions:
            - action: "{{ action_1 }}"
              title: "{{ action_1_title }}"
              uri: "{{ action_1_uri }}"
            - action: "{{ action_2 }}"
              title: "{{ action_2_title}}"
              uri: "{{ action_2_uri }}"
            - action: "{{ action_3 }}"
              title: "{{ action_3_title }}"
              uri: "{{ action_3_uri }}"
          channel: "{{ channel }}"
          color: "{{ color }}"
          image: "{{ image }}"
          clickAction: "{{ clickaction }}"
          tag: "{{ tag }}"
          icon: "{{ icon }}"
