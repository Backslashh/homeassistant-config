- id: '1592803760415'
  alias: Turn on kitchen lights when movement is detetcted before 630pm
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_sensor_motion
    platform: state
    to: 'on'
  condition:
  - after: 06:30:00
    before: '18:30:00'
    condition: time
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  action:
  - data:
      transition: 2.5
    entity_id: scene.kitchen_bright
    service: scene.turn_on

- id: '1592803926000'
  alias: Turn on Kitchen lights when it's early
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_sensor_motion
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  - after: 06:00:00
    before: 06:29:00
    condition: time
  action:
  - data:
      transition: 2.5
    entity_id: scene.kitchen_dim
    service: scene.turn_on

- id: '1592804217406'
  alias: Dim kitchen lights after no motion for 5 min
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_sensor_motion
    for: 00:05:00
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  - condition: state
    entity_id: light.kitchen_pendant_lights
    state: 'on'
  action:
  - data:
      transition: 5
    entity_id: scene.kitchen_dim
    service: scene.turn_on

- id: '1592804365507'
  alias: Turn off Kitchen lights after no motion for 10min
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_sensor_motion
    for: 00:10:00
    platform: state
    to: 'off'
  condition:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  action:
  - data:
      transition: 2.5
    entity_id: light.kitchen_downlight
    service: light.turn_off
  - data:
      transition: 2.5
    entity_id: light.kitchen_pendant_lights
    service: light.turn_off

- id: '1592804464192'
  alias: Turn on Kitchen light dim when movement is detected after 630pm
  description: ''
  trigger:
  - entity_id: binary_sensor.kitchen_sensor_motion
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  - condition: state
    entity_id: input_boolean.ollie_sleeping
    state: 'off'
  - after: '18:30:00'
    before: '19:50:00'
    condition: time
  action:
  - data:
      entity_id: scene.kitchen_dim
      transition: 3
    service: scene.turn_on

- id: 'ollie_is_sleeping'
  alias: Turn off the kitchen lights if Ollie is going to sleep
  trigger:
    platform: state
    entity_id: media_player.kitchen_display
    to: 'playing'
  condition:
  - condition: state
    entity_id: input_boolean.guest_mode
    state: 'off'
  - condition: time
    after: '18:50:00'
    before: '20:00:00'
  action:
  - service: light.turn_off
    entity_id: light.kitchen_lights
  - service: input_boolean.turn_on
    entity_id: input_boolean.ollie_sleeping
  - service: scene.turn_on
    entity_id: scene.night_light

- id: 'reset_ollie_sleeping'
  alias: Reset Ollie Sleeping lights
  trigger:
    platform: time
    at: 00:00:00
  action:
    service: input_boolean.turn_off
    data:
      entity_id: 
        - input_boolean.ollie_sleeping

