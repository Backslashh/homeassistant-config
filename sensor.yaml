  - platform: darksky
    api_key: !secret darksky_key
    monitored_conditions:
      - summary
      - daily_summary
      - hourly_summary
      - temperature
    scan_interval:
      minutes: 20
  - platform: time_date
    display_options:
      - 'time'
      - 'date'
      - 'date_time'
      - 'date_time_iso'
      - 'time_date'
      - 'time_utc'
      - 'beat'
  - platform: fail2ban
    jails:
      - hass-iptables
    file_path: /fail2ban/fail2ban.log
  - platform: google_wifi
    name: WiFi
  - platform: template
    sensors:
      front_door_detection:
        friendly_name: 'Front Door Detection'
        value_template: '{{ states.image_processing.facebox_saved_image.attributes.faces[0]["name"]|title()}}'
      lights_on:
        value_template: >
          {% set lights = [
            states.light.bedroom_lamps,
            states.light.kitchen_lights,
            states.light.lounge_room_lamp,
            states.light.ollie_s_lamp,
            states.light.teddy_s_lamp,
            ] %}
          {{ lights | selectattr('state','eq','on') | list | count }}
  - platform: mqtt
    name: Zigbee2mqtt Bridge state
    state_topic: "zigbee2mqtt/bridge/state"
    icon: mdi:router-wireless
  # Sensor for Showing the Zigbee2mqtt Version
  - platform: mqtt
    name: Zigbee2mqtt Version
    state_topic: "zigbee2mqtt/bridge/config"
    value_template: "{{ value_json.version }}"
    icon: mdi:zigbee
  # Sensor for Showing the Coordinator Version
  - platform: mqtt
    name: Coordinator Version
    state_topic: "zigbee2mqtt/bridge/config"
    value_template: "{{ value_json.coordinator }}"
    icon: mdi:chip
  - platform: mqtt
    name: Zigbee2mqtt Networkmap
    state_topic: zigbee2mqtt/bridge/networkmap/raw
    value_template: >-
      {{ now().strftime('%Y-%m-%d %H:%M:%S') }}
    json_attributes_topic: zigbee2mqtt/bridge/networkmap/raw
  - platform: mqtt
    name: Bedroom Temperature
    state_topic: "/aircon/34ea344df92e/ambient_temp/value"
    device_class: temperature
    unit_of_measurement: '°C'
    icon: mdi:thermometer
  - platform: mqtt
    name: Teddy Room Temperature
    state_topic: "/aircon/34ea345aa720/ambient_temp/value"
    device_class: temperature
    unit_of_measurement: '°C'
    icon: mdi:thermometer
  - platform: mqtt
    name: Ollie Room Temperature
    state_topic: "/aircon/34ea345b4f90/ambient_temp/value"
    device_class: temperature
    unit_of_measurement: '°C'
    icon: mdi:thermometer
