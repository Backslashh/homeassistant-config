type: markdown
card-size: 3
content: >
    {% set light_count = states.light | selectattr('state','equalto','on') | list | count %}
    {%- if light_count == 1 -%}
      There is currently one light on.
    {%- else -%}
      There are currently {{light_count}} lights on.
    {%- endif -%}
    {{ " " }}
    {% set door_count = states.binary_sensor | selectattr('state', 'eq', 'on') | selectattr('attributes.device_class', 'eq', 'door') | list | count %}
    {%- if door_count != 0 -%}
      {%- if door_count == 1 -%}
        There is currently one door open.
      {%- else -%}
        There are currently {{door_count}} doors open.
      {%- endif -%}
    {%- endif -%}
    {{ "\n" }}
    {% set people = states.person | selectattr('state','equalto','home') | list %}
    {%- if people | count > 0 -%}
      {%- for p in people -%}
        {{- p.attributes.friendly_name.split(" ")[0] -}}
        {%- if not loop.last -%}
          {%- if people | count == 1 -%}
            {{ " " }}
          {%- elif people | count == 2 -%}
            {{ " and "}}
          {%- else -%}
            {{ ", " }}
          {%- endif -%}
        {%- endif -%}
      {%- endfor -%}
      {%- if people | count == 1 -%}
       {{ " " }}is at home
      {%- else -%}
      {{ " " }}are at home
      {%- endif -%}
    {%- else %}
      There is nobody at home
    {%- endif -%}.
style:
  .: |
    ha-card {
      --ha-card-background: none !important;
      box-shadow: none !important;
    }
  ha-markdown:
    $: |
      padding-top: 10 !important;
      font-size: 15px;
      font-weight: thin;
      font-family: Helvetica;
      letter-spacing: '-0.01em';