  # lovelace_gen

  - icon: mdi:home-assistant
    id: home
    title: {{ _global.home.name }}
    path: home
    badges: []
    cards:
    - type: horizontal-stack
      cards:
        - type: markdown
          card_size: 2
          content: |
            {% if now().strftime('%H')|int < 12 and now().strftime('%H')|int > 6 %}
            # Good morning.
            {% elif now().strftime('%H')|int >= 12 and now().strftime('%H')|int < 17 %}
            # Good afternoon.
            {% else %}
            # Good evening.
            {% endif %}
          style:
            .: |
              ha-card {
                line-height: 24px !important;
                padding: 10px 0px;                
                --paper-card-background-color: 'rgba(11, 11, 11, 0.00)';
                box-shadow: 2px 2px rgba(0,0,0,0.0);
              }
            ha-markdown:
              $: |
                h1 {
                  font-size: 20px;
                  font-weight: bold;
                  font-family: Helvetica;
                  letter-spacing: '-0.01em';
                }
                
        - type: weather-forecast
          entity: weather.dark_sky
          show_forecast: false
          style: |
            ha-card {
              background: none;
              box-shadow: none;
            }
            .name-state {
              display: none !important;
            }
            .icon-image svg {
              height: 28px;
              margin-bottom: -10px !important;
            }
            .info, .temp-attribute, .temp, .icon-image, svg, .content {
              display: inline !important;
              text-align: right;
            }
            .content {
              margin-top: 12px;
              position: absolute !important;
              right: 16px !important;
            }

    - !include ../ui/recap.yaml
    
    - type: vertical-stack
      cards:
        - type: markdown
          content: |
            # Rooms
          style:
            .: |
              ha-card {
                height: 20px;
                --paper-card-background-color: 'rgba(11, 11, 11, 0.00)';
                box-shadow: 2px 2px rgba(0,0,0,0.0);
              }
            ha-markdown:
              $: |
                h1 {
                  font-size: 20px;
                  font-weight: bold;
                  font-family: Halvetica;
                  letter-spacing: '-0.01em';
                }
        #- type: vertical-stack
        #  cards:
        #    - type: custom:mod-card
        #      card:
        #        type: custom:layout-card
        #        layout: horizontal
        #        min_columns: 2
        #        justify_content: start
        #        cards:
                  #{% for room in _global.rooms %}
        #          - type: custom:decluttering-card
        #            template: "simple_link"
        #            variables:
        #              - path: '{{ room.name | lower | replace(" ", "_") }}'
        #              - name: {{ room.name }}
        #              - icon: {{ room.icon }}
                  #{% endfor %}

    - type: vertical-stack
      cards:
        - type: markdown
          content: |
            # Security
          style:
            .: |
              ha-card {
                height: 20px;                  
                --paper-card-background-color: 'rgba(11, 11, 11, 0.00)';
                box-shadow: 2px 2px rgba(0,0,0,0.0);
              }
            ha-markdown:
              $: |
                h1 {
                  font-size: 20px;
                  font-weight: bold;
                  font-family: Helvetica;
                  letter-spacing: '-0.01em';
                }
        - type: horizontal-stack
          cards:
            - entity: alarm_control_panel.home_alarm
              name: Home Alarm
              show_state: true
              state:
                - styles:
                    icon:
                      - color: '#F0DC6E'
                  value: pending
                - styles:
                    icon:
                      - color: '#D3D2D0'
                  value: disarmed
                - styles:
                    icon:
                      - color: '#F9160B'
                  value: armed_away
                - styles:
                    icon:
                      - color: '#16A914'
                  value: armed_home
              template: standard_button
              size: 30px
              type: 'custom:button-card'
              styles:
                card:
                  - border-radius: 15px
                  - background-color: var(--primary-background-color)
              style: |
                ha-card {
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') %}
                      -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                    {% elif is_state('sun.sun', 'below_horizon') %}
                      -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                    {% endif %}    
                }
            - entity: input_boolean.guest_mode
              name: guest mode
              show_state: true
              template: standard_button
              size: 30px
              type: 'custom:button-card'
              state:
                - icon: 'mdi:account-multiple'
                  value: 'on'
                  color: 'var(--paper-item-icon-active-color)'
                - icon: 'mdi:account'
                  value: 'off'
              styles:
                card:
                  - border-radius: 15px
                  - background-color: var(--primary-background-color)
              style: |
                ha-card {
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') and is_state('input_boolean.guest_mode', 'on') %}
                      inset -4px -4px 8px 0 rgba(255,255,255,.5), inset 4px 4px 8px 0 rgba(0,0,0,.03);
                    {% elif is_state('sun.sun', 'above_horizon') and is_state('input_boolean.guest_mode', 'off') %}                      
                      -5px -5px 8px 0 rgba(255,255,255,.5),5px 5px 8px 0 rgba(0,0,0,.03);
                    {% elif is_state('sun.sun', 'below_horizon') and is_state('input_boolean.guest_mode', 'on') %}                      
                      inset -4px -4px 10px 0 rgba(50, 50, 50,.5), inset 4px 4px 12px 0 rgba(0,0,0,.3); 
                    {% elif is_state('sun.sun', 'below_horizon') and is_state('input_boolean.guest_mode', 'off') %}   
                      -5px -5px 8px 0 rgba(50, 50, 50,.5),5px 5px 8px 0 rgba(0,0,0,.15);
                    {% endif %}    
                }
            - type: conditional
              conditions:
                - entity: binary_sensor.garage_door
                  state: "on"
              card:
                type: 'custom:button-card'
                entity: binary_sensor.garage_door
                name: Back Door
                show_state: true
                template: standard_button
                state:
                  - icon: 'mdi:garage-open-variant'
                    value: open
                    color: '#EF4F1A'
                  - icon: 'mdi:garage-variant'
                    value: closed
                    color: '#00993E'
                size: 30px
                styles:
                  card:
                    - border-radius: 15px
                    - background-color: var(--primary-background-color)
                style: |
                  ha-card {
                    margin: 10px;
                    box-shadow: 
                      {% if is_state('sun.sun', 'above_horizon') %}
                        -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                      {% elif is_state('sun.sun', 'below_horizon') %}
                        -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                      {% endif %}
            - type: conditional
              conditions:
                - entity: binary_sensor.back_door
                  state: "on"
              card:
                type: 'custom:button-card'
                entity: binary_sensor.back_door
                name: Back Door
                show_state: true
                template: standard_button
                state:
                  - icon: 'mdi:door-open'
                    value: open
                    color: '#EF4F1A'
                  - icon: 'mdi:door-closed'
                    value: closed
                    color: '#00993E'
                size: 30px
                styles:
                  card:
                    - border-radius: 15px
                    - background-color: var(--primary-background-color)
                style: |
                  ha-card {
                    margin: 10px;
                    box-shadow: 
                      {% if is_state('sun.sun', 'above_horizon') %}
                        -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                      {% elif is_state('sun.sun', 'below_horizon') %}
                        -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                      {% endif %}
    - type: vertical-stack
      cards:
        - type: markdown
          content: |
            # Ollie's Meds
          style:
            .: |
              ha-card {
                height: 20px;                  
                --paper-card-background-color: 'rgba(11, 11, 11, 0.00)';
                box-shadow: 2px 2px rgba(0,0,0,0.0);
              }
            ha-markdown:
              $: |
                h1 {
                  font-size: 20px;
                  font-weight: bold;
                  font-family: Helvetica;
                  letter-spacing: '-0.01em';
                }
        - type: horizontal-stack
          cards:
            - entity: input_boolean.morning_meds_taken
              name: Morning Meds
              show_state: false
              template: standard_button
              type: 'custom:button-card'
              size: 30px
              state:
                - icon: 'mdi:check-circle'
                  value: 'on'
                  color: '#00b800'
                - icon: 'mdi:pill'
                  value: 'off'
                  color: '#D3D2D0'
              styles:
                card:
                  - border-radius: 15px
                  - background-color: var(--primary-background-color)
              style: |
                ha-card {
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') %}
                      -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                    {% elif is_state('sun.sun', 'below_horizon') %}
                      -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                    {% endif %}    
                }
            - entity: input_boolean.evening_meds_taken
              name: Evening Meds
              show_state: false
              template: standard_button
              type: 'custom:button-card'
              size: 30px
              state:
                - icon: 'mdi:check-circle'
                  value: 'on'
                  color: '#00b800'
                - icon: 'mdi:pill'
                  value: 'off'
                  color: '#D3D2D0'
              styles:
                card:
                  - border-radius: 15px
                  - background-color: var(--primary-background-color)
              style: |
                ha-card {
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') %}
                      -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                    {% elif is_state('sun.sun', 'below_horizon') %}
                      -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                    {% endif %}    
                }
            - entity: input_boolean.bedtime_meds_taken
              name: Bedtime Meds
              show_state: false
              template: standard_button
              type: 'custom:button-card'
              size: 30px
              state:
                - icon: 'mdi:check-circle'
                  value: 'on'
                  color: '#00b800'
                - icon: 'mdi:pill'
                  value: 'off'
                  color: '#D3D2D0'
              styles:
                card:
                  - border-radius: 15px
                  - background-color: var(--primary-background-color)
              style: |
                ha-card {
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') %}
                      -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                    {% elif is_state('sun.sun', 'below_horizon') %}
                      -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                    {% endif %}    
                }
    - type: vertical-stack
      cards:        
        - type: conditional
          conditions:
            - entity: sensor.garbage_general
              state: "in 2 days"
          card:
            type: markdown
            content: |
              # Garbage Collection
            style:
              .: |
                ha-card {
                  height: 20px;                  
                  --paper-card-background-color: 'rgba(11, 11, 11, 0.00)';
                  box-shadow: 2px 2px rgba(0,0,0,0.0);
                }
              ha-markdown:
                $: |
                  h1 {
                    font-size: 20px;
                    font-weight: bold;
                    font-family: Helvetica;
                    letter-spacing: '-0.01em';
                  }
        - type: horizontal-stack
          cards:
            - type: custom:garbage-collection-card
              entity: sensor.garbage_recycling
              hide_before: 2
              icon_size: 35px
              icon_color: green
              hide_date: true
              style: |
                ha-card {
                  background-color: var(--primary-background-color);
                  border-radius: 15px;
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') %}
                      -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                    {% else %}
                      -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                    {% endif %}   
                }
            - type: custom:garbage-collection-card
              entity: sensor.garbage_general
              hide_before: 2
              icon_size: 35px
              icon_color: '#0561ba'
              style: |
                ha-card {
                  background-color: var(--primary-background-color);
                  border-radius: 15px;
                  margin: 10px;
                  box-shadow: 
                    {% if is_state('sun.sun', 'above_horizon') %}
                      -8px -8px 8px 0 rgba(255,255,255,.5),8px 8px 8px 0 rgba(0,0,0,.03);
                    {% else %}
                      -8px -8px 8px 0 rgba(50, 50, 50,.5),8px 8px 8px 0 rgba(0,0,0,.15);
                    {% endif %}   
                }